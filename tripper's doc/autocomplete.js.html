<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: autocomplete.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: autocomplete.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * @class Autocomplete
 * @classdesc Represents an Autocomplete widget for a search bar using [leafleatjs-autocomplete]{@link https://github.com/tomickigrzegorLeaflet.Autocomplete}
 *
 * @param {string} selector - The selector of the search bar.
 * @param {Object} options - Options for configuring the Autocomplete widget.
 * @param {boolean} options.selectFirst - Whether to select the first item in the list of results by default.
 * @param {number} options.howManyCharacters - The number of characters entered before starting the search.
 * @param {Function} options.onSearch - Callback function triggered when a search is initiated.
 * @param {Object} options.onSearch.currentValue - The current value entered in the search bar.
 * @returns {Promise&lt;Array>} A promise that resolves to an array of features.
 * @param {Function} options.onResults - Callback function triggered when search results are available.
 * @param {Object} options.onResults.currentValue - The current value entered in the search bar.
 * @param {number} options.onResults.matches - The number of matches found in the search results.
 * @param {Function} options.onResults.template - A template function for rendering the search results.
 * @returns {string} The HTML representation of the search results.
 * @param {Function} options.noResults - Callback function triggered when no search results are found.
 * @param {Object} options.noResults.currentValue - The current value entered in the search bar.
 * @param {Function} options.noResults.template - A template function for rendering a "no results" message.
 * @returns {string} The HTML representation of the "no results" message.
 *
 */


// minimal configure
new Autocomplete("destination" /*put here the selector of the searchbar*/, {
    // default selects the first item in
    // the list of results
    selectFirst: true,

    // The number of characters entered should start searching
    howManyCharacters: 2,

    // onSearch
    onSearch: ({ currentValue }) => {
        // You can also use static files
        // const api = '../static/search.json'
        const api = `https://nominatim.openstreetmap.org/search?format=geojson&amp;limit=5&amp;city=${encodeURI(
            currentValue
        )}`;


        return new Promise((resolve) => {
            fetch(api)
                .then((response) => response.json())
                .then((data) => {
                    resolve(data.features);
                })
                .catch((error) => {
                    console.error(error);
                });
        });
    },
    // nominatim GeoJSON format parse this part turns json into the list of
    // records that appears when you type.
    onResults: ({ currentValue, matches, template }) => {
        const regex = new RegExp(currentValue, "gi");

        // if the result returns 0 we
        // show the no results element
        return matches === 0
            ? template
            : matches
                .map((element) => {
                    return `
          &lt;li class="loupe">
            &lt;p>
              ${element.properties.display_name.replace(
                        regex,
                        (str) => `&lt;b>${str}&lt;/b>`
                    )}
            &lt;/p>
          &lt;/li> `;
                })
                .join("");
    },



    // the method presents no results element
    noResults: ({ currentValue, template }) =>
        template(`&lt;li>No results found: "${currentValue}"&lt;/li>`),
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Autocomplete.html">Autocomplete</a></li></ul><h3>Global</h3><ul><li><a href="global.html#NOMINATIM_API_URL">NOMINATIM_API_URL</a></li><li><a href="global.html#OVERPASS_API_URL">OVERPASS_API_URL</a></li><li><a href="global.html#TILE_LAYER_URL">TILE_LAYER_URL</a></li><li><a href="global.html#addPlaceMaker">addPlaceMaker</a></li><li><a href="global.html#betweenDates">betweenDates</a></li><li><a href="global.html#createAccordion">createAccordion</a></li><li><a href="global.html#endDate">endDate</a></li><li><a href="global.html#fetchNominatim">fetchNominatim</a></li><li><a href="global.html#fetchSuggestedPLaces">fetchSuggestedPLaces</a></li><li><a href="global.html#getDataFromLocalStorage">getDataFromLocalStorage</a></li><li><a href="global.html#handleAddAttractionButtonClick">handleAddAttractionButtonClick</a></li><li><a href="global.html#handleCancAttractionClick">handleCancAttractionClick</a></li><li><a href="global.html#initializeDraggableElement">initializeDraggableElement</a></li><li><a href="global.html#initializeDroppableForm">initializeDroppableForm</a></li><li><a href="global.html#initilizeAccordion">initilizeAccordion</a></li><li><a href="global.html#loadMap">loadMap</a></li><li><a href="global.html#removeMarkers">removeMarkers</a></li><li><a href="global.html#startDate">startDate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Dec 12 2023 00:10:02 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
